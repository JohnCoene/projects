---
title: ""
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(echarts)
library(htmltools)
library(RGoogleAnalytics)

# token <- readRDS("token.rds")
# token <- ValidateToken(token)
# 
# params <- Init(start.date = "2017-01-01", 
#      end.date = "2017-11-01",
#      dimensions = "ga:country",
#      metrics = "ga:pageViews",
#      table.id = "ga:117734225")
# 
# query <- QueryBuilder(params)
# sesh <- GetReportData(query, token)

sesh <- read.csv("./data/sessions.csv")
```

<main>
<div class = "container">

```{r, echo=FALSE}
h1(
  "echarts"
)
```

```{r header}
sesh %>% 
    echart(Country, width = "100%") %>% 
    emap() %>% 
    emap_choropleth(Sessions) %>% 
    ecolorbar(min = 1, max = 270, calculable = TRUE, text = list("high", "low")) %>% 
    etitle("Sessions origins in 2016", "john-coene.com", sublink = "http://john-coene.com/") %>%
    etheme("blue")
```

```{r chart types}
div(class = "page-header",
    h2("Features", class = "text-primary"))
```

1. bar charts
2. line charts
3. area charts
4. pie & donut charts
5. heatmaps
6. chord diagrams
7. venn diagrams
8. gauges
9. force networks
10. word-clouds
11. maps
12. radar
13. candlestick charts
14. themes
15. responsive
16. animations

```{r install}
div(class = "page-header",
    h3("Install", class = "text-primary"))
```

```{r install code, eval=FALSE, echo=TRUE}
devtools::install_github("JohnCoene/echarts")
```

```{r Explanation}
div(class = "page-header",
    h2("How it works?", class = "text-primary"))
```

Easy: nitialise your chart with `echart` then add series, supports magrittr pipes, `%>%`, supports `dplyr`'s `group_by`.

```{r first chart}
div(class = "page-header",
    h3("Your first chart", class = "text-primary"))
```

```{r first chart code, eval=TRUE, echo=TRUE}
df <- data.frame(x = 1:20,
                 y = runif(20, 5, 10),
                 z = round(runif(20, 7, 12)),
                 w = round(runif(20, 9, 14)))

df %>% 
  echart(x, width = "100%", height = 400) %>% 
  eline(y) %>%
  escatter(z, w, symbolSize = 10) %>%
  etooltip(trigger = "axis") %>% 
  etheme("macarons")
```

```{r advanced}
div(class = "page-header",
    h3("Advanced Example", class = "text-primary"))
```

Code used to make map in header.

```{r adv, echo=TRUE, eval = FALSE}
sesh <- read.csv("https://raw.githubusercontent.com/JohnCoene/projects/gh-pages/htmlwidgets/echarts/data/sessions.csv")

sesh %>% 
  echart(Country) %>% 
  emap() %>% 
  emap_choropleth(Sessions) %>% 
  ecolorbar(min = 1, max = 870, calculable = TRUE, text = list("high", "low")) %>% 
  etitle("Sessions origins in 2016", "john-coene.com", sublink = "http://john-coene.com/") %>% 
  etheme("roma")
```

</div>
</main>